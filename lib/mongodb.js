const mongoose = require('mongoose');
const config = require('../config');
const EnvVar = require('./mongodbenv');

const defaultEnvVariables = [
    { key: 'ALIVE_IMG', value: 'data:image/jpeg;base64,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' },
    { key: 'ALIVE_MSG', value: 'Hello , I am alive now!!' },
    { key: 'PREFIX', value: '.' },
    { key: 'AUTO_READ_STATUS', value: 'false' },
    { key: 'MODE', value: 'public' },
];

// MongoDB connection function
const connectDB = async () => {
    try {
        await mongoose.connect(config.MONGODB);
        console.log('ðŸ›œ MongoDB Connected âœ…');

        // Check and create default environment variables
        for (const envVar of defaultEnvVariables) {
            const existingVar = await EnvVar.findOne({ key: envVar.key });

            if (!existingVar) {
                // Create new environment variable with default value
                await EnvVar.create(envVar);
                console.log(`âž• Created default env var: ${envVar.key}`);
            }
        }

    } catch (err) {
        console.error(err.message);
        process.exit(1);
    }
};

module.exports = connectDB;
